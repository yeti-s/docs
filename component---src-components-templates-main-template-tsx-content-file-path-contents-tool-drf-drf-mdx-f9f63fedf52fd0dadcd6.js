"use strict";(self.webpackChunkyeti_docs=self.webpackChunkyeti_docs||[]).push([[7310],{3298:function(e,n,a){a.r(n),a.d(n,{default:function(){return M}});var t=a(1151),s=a(7294),r=a(2439);function i(e){const n=Object.assign({p:"p",code:"code",h1:"h1",pre:"pre",span:"span",h2:"h2",ul:"ul",li:"li"},(0,t.ah)(),e.components);return r||c("Elem",!1),r.ColorText||c("Elem.ColorText",!0),r.Cols||c("Elem.Cols",!0),r.Comment||c("Elem.Comment",!0),r.TwoCols||c("Elem.TwoCols",!0),s.createElement(s.Fragment,null,s.createElement(n.p,null,"Django를 이용하여 REST API 서버를 제작하기 위한 프레임워크 ",s.createElement(n.code,null,"DRF(Django REST Framework)"),"에 대해 공부합니다.\r\nDjango를 이용해서 ",s.createElement(n.code,null,"SSR(Server Side Rendering)")," 웹 페이지를 만들 수 있지만 우리는 REST API 서버를 만드는 것이 목적이기 때문에 템플릿에 관한 부분은 생략하도록 하겠습니다."),"\n",s.createElement(n.h1,{id:"start"},"START"),"\n",s.createElement(n.p,null,"먼저 필요한 패키지들을 설치해줍시다."),"\n",s.createElement(n.pre,null,s.createElement(n.code,null,"$ pip install Django djangorestframework django-filter\n")),"\n",s.createElement(n.p,null,"패키지 설치를 완료하였다면 ",s.createElement(n.code,null,"django-admin"),"을 이용하여 간단한 프로젝트를 하나 생성해보죠."),"\n",s.createElement(n.pre,null,s.createElement(n.code,null,"$ django-admin startproject mysite\n")),"\n",s.createElement(r.Comment,null,s.createElement(n.p,null,"프로젝트를 생성할 때 충돌을 피하기 위해 django, test와 같은 Python 패키지의 이름을 사용하지 않는 것을 권장한다고 합니다.\r\n또한 생성될 프로젝트를 root로 두지 말라고 합니다.\r\nPython 코드가 웹 서버의 최상단 문서에 존재하는 것은 사람들이 웹을 통해 코드를 볼 수 있어 보안에 좋지 않다고 하네요.")),"\n",s.createElement(n.p,null,"아래와 같이 프로젝트 파일들이 생성된 것을 볼 수 있습니다."),"\n",s.createElement(n.pre,null,s.createElement(n.code,null,"mysite\r\n|-- mysite\r\n|   |-- __iniy__.py\r\n|   |-- asgi.py\r\n|   |-- settings.py\r\n|   |-- urls.py\r\n|   |-- wsgi.py\r\nmanage.py\n")),"\n",s.createElement(n.p,null,"settings.py 파일에서 여러 셋팅을 관리합니다.\r\nDRF를 사용하기 위해 해당 파일에 아래와 같이 내용을 추가해줍시다."),"\n",s.createElement(n.pre,null,s.createElement(n.code,{className:"language-python"},"# mysite/mysite/settings.py\r\nINSTALLED_APPS = [\r\n    ...\r\n    'rest_framework'\r\n]\n")),"\n",s.createElement(n.p,null,"이제 Django가 프로젝트 시작 시 DRF를 로드하도록 지시합니다.\r\n이제 서버를 실행시켜 봅시다."),"\n",s.createElement(n.pre,null,s.createElement(n.code,null,"$ python manage.py runserver\n")),"\n",s.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<figure class="gatsby-resp-image-figure" style="">\n    <span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 704px; "\n    >\n      <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 53.97727272727273%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAA/UlEQVR42q1SSW7EIBD0/9829+Q4kRKP2QyY1WsF8HLJyONEKVQCVdMFDV3dRQNuNV5h+SEssM5BGA1pDay18N6hwgVM84w58flB69hRLSdG87JG3zuKm/w6DM5wesPd8I3XuNGPTZt/bzgMA8bEzjgQLuGMR3ABjCtobUs887KhNQaMsUQOShk452gIQZ3YMJo0Ct3p9C/L9ZKtsRBCQEoJpVSZScvBlYRJBz4ze/mGf8H/G+YeC2NfGMcBboiYtnLGaTp0X+Z+/emUk7WwMa/3B6hijCBK4NEyEClQtxShjyXogi860xKfgkB6c3QBT1qdc1IuUS182psNvwG5wWEzd/C7qAAAAABJRU5ErkJggg==\'); background-size: cover; display: block;"\n  ></span>\n  <img\n        class="gatsby-resp-image-image"\n        alt="첫 실행 화면"\n        title=""\n        src="/static/4bc016934074a832d970a30fc1766b8c/5ebd7/runserver.png"\n        srcset="/static/4bc016934074a832d970a30fc1766b8c/06437/runserver.png 176w,\n/static/4bc016934074a832d970a30fc1766b8c/ba1c3/runserver.png 352w,\n/static/4bc016934074a832d970a30fc1766b8c/5ebd7/runserver.png 704w,\n/static/4bc016934074a832d970a30fc1766b8c/91f10/runserver.png 992w"\n        sizes="(max-width: 704px) 100vw, 704px"\n        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n        loading="lazy"\n        decoding="async"\n      />\n    </span>\n    <figcaption class="gatsby-resp-image-figcaption">첫 실행 화면</figcaption>\n  </figure>'}}),"\n",s.createElement(n.p,null,"서버를 열고 해당 URL로 접속하면 위와 같은 화면이 뜨는 것을 볼 수 있습니다.\r\n포트 번호를 변경하거나 외부 접속을 허용하기 위해 아래와 같이 설정할 수도 있죠."),"\n",s.createElement(n.pre,null,s.createElement(n.code,null,"$ pthon manage.py runserver 0.0.0.0:8080\n")),"\n",s.createElement(n.p,null,"아래와 같이 Database에 적용되지 않은 변경사항(migrations)들에 대한 경고들은 나중에 다루도록 하겠습니다."),"\n",s.createElement(r.ColorText,{color:"var(--error)"},s.createElement(n.p,null,"You have 18 unapplied migration(s). Your project may not work properly until you apply the migrations for app(s): admin, auth, contenttypes, sessions.\r\nRun 'python manage.py migrate' to apply them.")),"\n",s.createElement(n.h1,{id:"db-연결"},"DB 연결"),"\n",s.createElement(n.p,null,"이제 앞으로 데이터를 R/W 하기 위한 DB를 연결해주는 부분을 보도록 하겠습니다.\r\nDB는 간단하게 ",s.createElement(n.code,null,"MySQL"),"을 ",s.createElement(n.code,null,"Docker"),"를 이용하여 구축하도록 할게요."),"\n",s.createElement(n.pre,null,s.createElement(n.code,null,"$ docker run --name mysql-container -e MYSQL_ROOT_PASSWORD=<password> -v mysql-volume:/var/lib/mysql -d -p 3306:3306 mysql:latest\n")),"\n",s.createElement(n.p,null,"MySQL을 Django에서 사용하기 위해서 mysqlclient 패키지를 설치해줍시다."),"\n",s.createElement(n.pre,null,s.createElement(n.code,null,"$ pip install mysqlclient\n")),"\n",s.createElement(n.p,null,"이전에 프로젝트를 생성하며 함께 생성된 파일중 settings.py를 보면 DB와 관련된 설정하는 부분이 있습니다.\r\n이 부분을 변경하여 구축한 MySQL DB와 연결하도록 해볼게요."),"\n",s.createElement(n.pre,null,s.createElement(n.code,{className:"language-python"},'# mysite/mysite/settings.py\r\nDATABASES = {\r\n    "default": {\r\n        "ENGINE": "django.db.backends.mysql",\r\n        "NAME": "mysite",\r\n        "USER": "root",\r\n        "PASSWORD": PASSWORD,\r\n        "HOST": "localhost",\r\n        "PORT": "3306"\r\n    }\r\n}\n')),"\n",s.createElement(r.TwoCols,null,s.createElement(r.Cols,{size:70},s.createElement(n.p,null,"이후 migrate를 실행하여 DB에 변경사항을 저장해주도록 하겠습니다."),s.createElement(n.pre,null,s.createElement(n.code,null,"$ python manage.py migrate\n")),s.createElement(n.p,null,"그렇다면 DB에 Django에서 기본적으로 가지고 있던 Table이 DB에 저장된 것을 확인할 수 있습니다.\r\nMongoDB나 PostgreSQL역시 각각 알맞은 패키지를 설치하고 위와 같이 설정을 변경하는 방식으로 연결해줄 수 있겠습니다.")),s.createElement(r.Cols,{size:30},s.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<figure class="gatsby-resp-image-figure" style="">\n    <span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 262px; "\n    >\n      <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 108.52272727272727%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAWCAYAAADAQbwGAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAD8ElEQVR42pVVy27bRhTV5/Y/umgXRdEuUqBouwnaRQE3dbIJ2kUAI2mUOHZs6kFJfIoSH+JbFB+SIlGnZ8a1IxvedICBhuTMuWfuOfeqE8cxonqDLM/Q7b7D+3dvMZ25EKM9HPB/R2e/22G726OqNvA9H4auIYwSbDYbNE2DHb+L9Xq9lr8PYxz44nh2xMumblAXLaq8wnRqY2o7mIxVKNcDOFMHuq6jp/QwHk1QN5v/2BPsMYZtu0dZlEgWNVZFAd91YZs60jSVG3a7T4zcPnq9dr9DHIXIsgw590eLBTrFpoUfllDnEVR3jlfdK7z5oEB3I2x5aEMazR5YbQ9ylnx5O5NVgyvVQG8yhWb7UEYWOk9V4NmkxROlwBfvY/x8meHrZ9f49i8TX/2p4MuTS3zz0sJvY+BX9cAJOX/6uMYP5yV+7KZ4cubhl/MMTz8u0XlNQbvzPV4YFb7r53g5ynHy1sLpxRwn/2g4/TDD80sfZ7MWr+wtzpw93njA31qNUyXBHxcefu/aeH4d4gVnR6rWthhlBb6fhAiSFMZ4AteZwbQtWKYNj6kYDQYwtQlUdUQRa7qiZP4WFNCAOuQ3ukO5viKgkH6/R1g1uExrlFQ8jmKEwQJ+4PM3QrAIEMcJtputtIYYq9UKvu9jNpvBsiyEYYiEe+4AEwKNig3y5ZLRTMydOSwydKy5tJI21smqvlNYAC6oqs09qqoiIqBwxh1gTMBzMszLEjN6LwkTeH4gAzw2BKBg5TgONE0nYIQ8zz8DpqwKg14ouHHG/IVBiDk9WSyLR8vwhmEgr6wbhmQryvgOMGIOz7MGCU06YuL9uQ/TsgnusELGGA1V2Az08MqmaWIwGLJk6UdFOWa4Rn/ZoCTThJFSJjhJM3kVcbWMa1ERSzLec3/J1ByL4jhTWaKfGTKHg6XoOjkFmJBhAMMy5SFnOqUwDgxDI1sNWZKhrCrJUIANyV4w7Pf7RwwJeJFRFJHD6Yze86QgnufxeY6c/gyjiB1ne+/KwgETTWN6TPpxeN82QpQlG4SIpo01KYrDvHmOy8IPecjCqqzuAINAiHLTjVya32bOH4hSI6aX1IGKCVuVYOTOWSX0mcXNYj1gxdTrDT1ZSZXFlcU7z3P5HN4XZVissWJZiUYb0IPCqFmWU5BUrheB8GUhm6wQRaRDXFsIV5JxXVf3GfYoSsKDg14fw76I6kMfG1D4PFbH0CcaS7O+V3pJQkdkKXI6IBT98JjhZV5jKezg+jJqwXWaJNI2wvC3bf4WUDBM00SuBeM8X94AsvUiZV7M6pO84qA/RP+6xz8rVgG7iE4VfTaL4yFymDCYKDfhhoJiilr+F+Fpa3VwEFnIAAAAAElFTkSuQmCC\'); background-size: cover; display: block;"\n  ></span>\n  <img\n        class="gatsby-resp-image-image"\n        alt="MySQL 연결 확인"\n        title=""\n        src="/static/e11c833183d6654c0dd83e79a626573f/8ff13/mysql_connection.png"\n        srcset="/static/e11c833183d6654c0dd83e79a626573f/06437/mysql_connection.png 176w,\n/static/e11c833183d6654c0dd83e79a626573f/8ff13/mysql_connection.png 262w"\n        sizes="(max-width: 262px) 100vw, 262px"\n        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n        loading="lazy"\n        decoding="async"\n      />\n    </span>\n    <figcaption class="gatsby-resp-image-figcaption">MySQL 연결 확인</figcaption>\n  </figure>'}}))),"\n",s.createElement(n.h1,{id:"table-생성"},"TABLE 생성"),"\n",s.createElement(n.p,null,"이제 DB에 등록할 객체를 생성하는 방법을 해보도록 할게요.\r\n먼저 계정에 대한 정보를 담는 Table을 생성하도록 하겠습니다."),"\n",s.createElement(n.pre,null,s.createElement(n.code,null,"$ python manage.py startapp account\n")),"\n",s.createElement(n.p,null,"위 명령어를 사용하면 아래와 같이 파일들이 생성되는 것을 볼 수 있습니다."),"\n",s.createElement(n.pre,null,s.createElement(n.code,null,"mysite\r\n|-- account\r\n|   |-- migrations\r\n|       |-- __init__.py\r\n|   |-- __init__.py\r\n|   |-- admin.py\r\n|   |-- apps.py\r\n|   |-- models.py\r\n|   |-- tests.py\r\n|   |-- views.py\r\n|-- mysite\r\n|   |-- ...\r\nmanage.py\n")),"\n",s.createElement(n.p,null,"여기서 models.py 파일에 모델을 구축하도록 하겠습니다."),"\n",s.createElement(n.pre,null,s.createElement(n.code,{className:"language-python"},"# mysite/account/models.py\r\nclass Account(models.Model):\r\n    account_number = models.CharField(max_length=16, unique=True)\r\n    password = models.DecimalField(max_digits=4, decimal_places=0)\r\n    created_at = models.DateTimeField(auto_now_add=True)\n")),"\n",s.createElement(n.p,null,"이제 해당 어플리케이션이 만들어졌다는 것을 알려주어야 합니다.\r\nsettings.py에 아래와 같이 알려주도록 합시다."),"\n",s.createElement(n.pre,null,s.createElement(n.code,{className:"language-python"},"# mysite/mysite/settings.py\r\nINSTALLED_APPS = [\r\n    ...\r\n    'account'\r\n]\n")),"\n",s.createElement(n.p,null,"또 변화가 발생했다는 것을 DB에 알려주어야 합니다."),"\n",s.createElement(n.pre,null,s.createElement(n.code,null,"$ python manage.py makemigrations\r\n$ python manage.py migrate\n")),"\n",s.createElement(n.p,null,"이제 DB를 보면 새로운 테이블이 생긴것을 확인할 수 있습니다."),"\n",s.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<figure class="gatsby-resp-image-figure" style="">\n    <span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 697px; "\n    >\n      <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 43.75%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABX0lEQVR42qVS2W6EMAzk/7+x2i4tBBZIAiE3x9ROtXRV9a2WRraDM7HHVHJeIKcJbSsghEBd19Bao+sE+r4vcds2aJoGfddjGAbKW0gp8UG14zhCKVXOuL5a1xVs/EEQadd1MMbAWouVYF/Ata/+N5ijstYVwm3b8B87jqN0X3FynmchZM8fGM/4PH7O/sK+75d/PB6odiLiZFgGqFlDkx7OuTI2j8bw3iPGiEQIhJhSyUOIyJnjgJRi0buydMEsBjpoKK3wfvsoIofARQkTLYyRcy6PRDp3pBc/EmKi2pniRE2dWJYF1UTbei7Ghw1vd+rK+UubeZ7hvCsSfEoiihmj0jAuYlgjmtbh3kTaMIicCLnN+l6X+VPaqEBehExincVOGrEVwnzgtpwwIUNoj5QDpNFUizJBxevuiax0QReNUEg2XISsFXs2tTik7UBHP0ZIGbP12H1A1IaKvwm/AJKtt2fKH1DsAAAAAElFTkSuQmCC\'); background-size: cover; display: block;"\n  ></span>\n  <img\n        class="gatsby-resp-image-image"\n        alt="Account Table"\n        title=""\n        src="/static/d2f90caed96efcb6f0f8cc3aad46af0e/7422e/mysql_account_table.png"\n        srcset="/static/d2f90caed96efcb6f0f8cc3aad46af0e/06437/mysql_account_table.png 176w,\n/static/d2f90caed96efcb6f0f8cc3aad46af0e/ba1c3/mysql_account_table.png 352w,\n/static/d2f90caed96efcb6f0f8cc3aad46af0e/7422e/mysql_account_table.png 697w"\n        sizes="(max-width: 697px) 100vw, 697px"\n        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n        loading="lazy"\n        decoding="async"\n      />\n    </span>\n    <figcaption class="gatsby-resp-image-figcaption">Account Table</figcaption>\n  </figure>'}}),"\n",s.createElement(n.p,null,"서버를 실행하고 /admin 페이지로 가보면 로그인이 필요합니다.\r\nsuperuser 계정을 만들어서 로그인을 진행합시다."),"\n",s.createElement(n.pre,null,s.createElement(n.code,null,"$ python manage.py createsuperuser\n")),"\n",s.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<figure class="gatsby-resp-image-figure" style="">\n    <span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 704px; "\n    >\n      <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 31.818181818181817%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAA70lEQVR42p3OXUvDMBQG4PzsgYJ44YU/QpHhx5Xadghe6G+YyphX6vAD1q2kW5ukbXrS19PMQkHmhYGH5JCTk1fsD69weH6Jg1N2xueLa+wNQ+ycRNjdYnAcYHAUbHYv/BFA6KKCzJSX5gbGOk9X9JslviM0DbYuMflKcPM0w/3zJ+6mH97t5B3R4wyjnmj8inD8gtHDG3RpkWVrJEkCmUqUZYmiKFDXNcRaaU6X+6Ky1rOsrftWagWVp0i5t+GIy+UC83kMpZQfZowBEUE459Bqm/5CjriP+NGmV0qJRRxD86AuoR+If6z+R12gLtQ3hQi56/K5v/0AAAAASUVORK5CYII=\'); background-size: cover; display: block;"\n  ></span>\n  <img\n        class="gatsby-resp-image-image"\n        alt="Admin Page"\n        title=""\n        src="/static/0074f24273ace68ddcd51eb68a52648e/5ebd7/django_admin_no_setting.png"\n        srcset="/static/0074f24273ace68ddcd51eb68a52648e/06437/django_admin_no_setting.png 176w,\n/static/0074f24273ace68ddcd51eb68a52648e/ba1c3/django_admin_no_setting.png 352w,\n/static/0074f24273ace68ddcd51eb68a52648e/5ebd7/django_admin_no_setting.png 704w,\n/static/0074f24273ace68ddcd51eb68a52648e/ecf19/django_admin_no_setting.png 948w"\n        sizes="(max-width: 704px) 100vw, 704px"\n        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n        loading="lazy"\n        decoding="async"\n      />\n    </span>\n    <figcaption class="gatsby-resp-image-figcaption">Admin Page</figcaption>\n  </figure>'}}),"\n",s.createElement(n.p,null,"해당 페이지에서 추가한 Account 내용이 보이지 않죠.\r\n이를 추가하기 위해서 admin.py 파일을 수정합니다."),"\n",s.createElement(n.pre,null,s.createElement(n.code,{className:"language-python"},"# mysite/account/admin.py\r\nfrom .models import Account\r\n\r\nadmin.site.register(Account)\n")),"\n",s.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<figure class="gatsby-resp-image-figure" style="">\n    <span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 704px; "\n    >\n      <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 34.65909090909091%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAA7DAAAOwwHHb6hkAAABI0lEQVR42n3QTU7DMBAF4NwRFmxZgMQ5QKxQWaKWS7RQwYKegRSQYENJU4VFQ4nj1LEd/+QxjaBULdTSJ8sezdPYwf5ZG0fnbRy0OqSNw9YF9k472Dm+xO7JFv/Ug0KUyHmBLOfICwFl7J/0mso6GOeaffU+COMU3fsRrocRrkj/MSbjDb3hCL3wFf2HiBodVCnAOUcpBDwFL9R1jaDUBpmQkJQuK4vym1zDpURBuNTwvgZjDFnGIChQKQVJNUehwXDygRuaavCS4O45wYDcPk1oojFN/KsXRuiGbzRh3HxBOp0iSd6bIK11E9oEftK/zfgcUlcQSi/N5SqFNGeYsQwpK+DpaYtmay0Mhf/s3nsExi4K9H46LNWbrDNwtoKh5m3rC5Bs+SKxakbsAAAAAElFTkSuQmCC\'); background-size: cover; display: block;"\n  ></span>\n  <img\n        class="gatsby-resp-image-image"\n        alt="Admin Page Account"\n        title=""\n        src="/static/147c566de0b146a83e7e5476b0a8ef97/5ebd7/django_admin_with_account.png"\n        srcset="/static/147c566de0b146a83e7e5476b0a8ef97/06437/django_admin_with_account.png 176w,\n/static/147c566de0b146a83e7e5476b0a8ef97/ba1c3/django_admin_with_account.png 352w,\n/static/147c566de0b146a83e7e5476b0a8ef97/5ebd7/django_admin_with_account.png 704w,\n/static/147c566de0b146a83e7e5476b0a8ef97/38124/django_admin_with_account.png 953w"\n        sizes="(max-width: 704px) 100vw, 704px"\n        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n        loading="lazy"\n        decoding="async"\n      />\n    </span>\n    <figcaption class="gatsby-resp-image-figcaption">Admin Page Account</figcaption>\n  </figure>'}}),"\n",s.createElement(n.p,null,"각 테이블의 Add 버튼을 눌러 매뉴얼하게 데이터를 추가할 수 있습니다."),"\n",s.createElement(n.h1,{id:"rest-api"},"REST API"),"\n",s.createElement(n.p,null,"이제 만들어둔 테이블의 데이터를 CRUD 하는 방법을 보겠습니다."),"\n",s.createElement(n.h2,{id:"get"},"GET"),"\n",s.createElement(n.p,null,"웹과 데이터를 주고 받기 위해 ",s.createElement(n.code,null,"Serializer"),"라는 객체를 json 형식으로 바꿔주는 과정이 필요합니다.\r\n생성된 account 폴더에 serializer.py 파일을 생성해 아래와 같이 내용을 적어줍시다."),"\n",s.createElement(n.pre,null,s.createElement(n.code,{className:"language-python"},"# mysite/account/serializer.py\r\nfrom rest_framework import serializers\r\nfrom .models import Account\r\n\r\nclass AccountSerializer(serializers.ModelSerializer):\r\n    class Meta:\r\n        model = Account\r\n        fields = '__all__'\n")),"\n",s.createElement(n.p,null,"위에서는 모든 field에 대해 전달해주기 위해 __all__을 사용하였지만, 추후에는 비밀번호와 같은 민감한 정보에 대해서는 전달해 주지 않도록 변경하는 작업을 진행해야 합니다."),"\n",s.createElement(n.p,null,"이제 API에 대한 내용을 views.py 에 작성하여 모든 account에 대한 정보를 전달하는 내용을 작성해봅시다."),"\n",s.createElement(n.pre,null,s.createElement(n.code,{className:"language-python"},"# mysite/account/views.py\r\nfrom rest_framework.views import APIView\r\nfrom rest_framework.response import Response\r\nfrom .serializer import *\r\n\r\nclass AccountList(APIView):\r\n    def get(self, request):\r\n        model = Account.objects.all()\r\n        serializers = AccountSerializer(model, many=True)\r\n        return Response(serializers.data)\n")),"\n",s.createElement(n.p,null,"여기서 ",s.createElement(n.code,null,"Account.object.all"),"은 데이터베이스로부터 데이터를 읽고 전달받은 모델의 객체 목록입니다.\r\n이를 ",s.createElement(n.code,null,"Serializer"),"를 통해 JSON 형식으로 변경하는 것이죠.\r\n이러한 방식이 바로 ",s.createElement(n.code,null,"Django"),"의 ",s.createElement(n.code,null,"ORM(Object Relational Mapping)"),"입니다.\r\nSQL 명령문이 아닌 비교적 간단한 Python 명령으로 데이터베이스를 다룰 수 있죠."),"\n",s.createElement(n.p,null,"여러 데이터를 가져오도록 해야 하니까 many를 True로 주었습니다.\r\n기본 값이 False라서 하나의 데이터만 가져오는 경우는 굳이 파라미터를 전달하지 않아도 되겠어요."),"\n",s.createElement(n.p,null,"마지막으로 urls.py 에 해당 API의 주소를 입력해주고 브라우저를 통해 확인을 하도록 해봅시다."),"\n",s.createElement(n.pre,null,s.createElement(n.code,{className:"language-python"},"# mysite/mysite/urls.py\r\nfrom account.api import AccountList\r\n\r\nurlpatterns = [\r\n    ...\r\n    path('api/account_list', AccountList.as_view(), name='account_list')\r\n]\r\n\n")),"\n",s.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<figure class="gatsby-resp-image-figure" style="">\n    <span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 704px; "\n    >\n      <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 35.79545454545455%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAv0lEQVR42p3RSQ4CIRAFUO5/EVfewo1XcGMcYostsRmKpujhW7RDjCvbSl4CCflVgPLew1oLIkKMEcz8kyRyZtwcYact9heLQ+2gjDE4VxW01miaBqWGYcA4jm+f+7IuelFqc7JYrLZYrncTFQJJkEOgFpwy0gytyDlj6HvRySQ91FlfcDxp1MahsYS25VliZNAkSQN+TOh8RJRucWbYtzK1Ys4gbRCqK6i+Pdjwf+D0Fl6uWkJe5OfS88AczB3u30UexNBTipMAAAAASUVORK5CYII=\'); background-size: cover; display: block;"\n  ></span>\n  <img\n        class="gatsby-resp-image-image"\n        alt="Account List API"\n        title=""\n        src="/static/b98d887bc912cf964385c051a64afd16/5ebd7/django_account_list.png"\n        srcset="/static/b98d887bc912cf964385c051a64afd16/06437/django_account_list.png 176w,\n/static/b98d887bc912cf964385c051a64afd16/ba1c3/django_account_list.png 352w,\n/static/b98d887bc912cf964385c051a64afd16/5ebd7/django_account_list.png 704w,\n/static/b98d887bc912cf964385c051a64afd16/fd84e/django_account_list.png 1056w,\n/static/b98d887bc912cf964385c051a64afd16/cdef6/django_account_list.png 1163w"\n        sizes="(max-width: 704px) 100vw, 704px"\n        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n        loading="lazy"\n        decoding="async"\n      />\n    </span>\n    <figcaption class="gatsby-resp-image-figcaption">Account List API</figcaption>\n  </figure>'}}),"\n",s.createElement(n.h2,{id:"post"},"POST"),"\n",s.createElement(n.p,null,"앞서 GET Method를 생성한 것과 비슷한 방법으로 POST를 생성하도록 하겠습니다.\r\nviews.py 파일을 수정해보죠."),"\n",s.createElement(n.pre,null,s.createElement(n.code,{className:"language-python"},"# mysite/account/views.py\r\nfrom rest_framework import status\r\n\r\nclass AccountList(APIView):\r\n    def get(self, request):\r\n        ...\r\n\r\n    def post(self, request):\r\n        serializer = AccountSerializer(data=request.data)\r\n        if serializer.is_valid():\r\n            serializer.save()\r\n            return Response(serializer.data, status=status.HTTP_201_CREATED)\r\n        return Response(serializer.errors, status=status.HTTP_400_BAD_REQUEST)\n")),"\n",s.createElement(n.p,null,"Request로 부터 데이터를 받아와 Serializer를 통해 객체로 생성합니다.\r\n이때 데이터의 유효성을 판단하여 상태를 반환하죠.\r\nAccount List 페이지에 가보면 아래와 같은 입력가능한 컴포넌트가 뜨는 것을 확인할 수 있습니다.\r\n여기에 데이터의 형식에 맞게 입력하여 데이터를 생성해보도록 하죠."),"\n",s.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<figure class="gatsby-resp-image-figure" style="">\n    <span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 704px; "\n    >\n      <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 33.52272727272727%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAApElEQVR42p3QMQ7CMAwF0N7/PhyBjZ2JAZa2CFCT2E6ctvk4rWBiKI30ZE9fzm+ICH3fwXuPYJwboKrIORtd9q1SjGiYGV3b4vF8wVOEC7JMTzY5gmPehCpJa2C90nnCa7AL7UoRAZuYEgqwyWxExzVQhBFYME4zSikGu943sAr2xWnemfQ70IhaF/+TpLh0Dre7R1P7+uAdyKpSjTicrjieW7wBm3ciPBOtCVQAAAAASUVORK5CYII=\'); background-size: cover; display: block;"\n  ></span>\n  <img\n        class="gatsby-resp-image-image"\n        alt="POST 요청"\n        title=""\n        src="/static/33fe6626f41d4c62b003e23d87ad5243/5ebd7/django_account_list_post.png"\n        srcset="/static/33fe6626f41d4c62b003e23d87ad5243/06437/django_account_list_post.png 176w,\n/static/33fe6626f41d4c62b003e23d87ad5243/ba1c3/django_account_list_post.png 352w,\n/static/33fe6626f41d4c62b003e23d87ad5243/5ebd7/django_account_list_post.png 704w,\n/static/33fe6626f41d4c62b003e23d87ad5243/fd84e/django_account_list_post.png 1056w,\n/static/33fe6626f41d4c62b003e23d87ad5243/9937c/django_account_list_post.png 1156w"\n        sizes="(max-width: 704px) 100vw, 704px"\n        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n        loading="lazy"\n        decoding="async"\n      />\n    </span>\n    <figcaption class="gatsby-resp-image-figcaption">POST 요청</figcaption>\n  </figure>'}}),"\n","\r\n","\n",s.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<figure class="gatsby-resp-image-figure" style="">\n    <span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 704px; "\n    >\n      <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 27.84090909090909%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAoElEQVR42p3OsQ7CIBDGcd5/c3b0IdwcfAkH46IJVCKllAIHTfnkOjm4tJf8EpILfxBKKSglIaVEKQU8y7Kg1vrX747PPKfrA8fLHYfzDcIODuPoQZRbcEbO2/E9Njfi+ZLodA9jPUYfQSkj7cAfSjFD6I/FMKVV4GUuu4IscjB0BuFtELXBJDWCce0l2h+MvUO0zeCR3LSiFiQqm6VU8AVtu9D990WyzwAAAABJRU5ErkJggg==\'); background-size: cover; display: block;"\n  ></span>\n  <img\n        class="gatsby-resp-image-image"\n        alt="POST 결과"\n        title=""\n        src="/static/bcc776d99439e181dd031ad476a2f661/5ebd7/django_account_list_post_result.png"\n        srcset="/static/bcc776d99439e181dd031ad476a2f661/06437/django_account_list_post_result.png 176w,\n/static/bcc776d99439e181dd031ad476a2f661/ba1c3/django_account_list_post_result.png 352w,\n/static/bcc776d99439e181dd031ad476a2f661/5ebd7/django_account_list_post_result.png 704w,\n/static/bcc776d99439e181dd031ad476a2f661/fd84e/django_account_list_post_result.png 1056w,\n/static/bcc776d99439e181dd031ad476a2f661/1132d/django_account_list_post_result.png 1158w"\n        sizes="(max-width: 704px) 100vw, 704px"\n        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n        loading="lazy"\n        decoding="async"\n      />\n    </span>\n    <figcaption class="gatsby-resp-image-figcaption">POST 결과</figcaption>\n  </figure>'}}),"\n",s.createElement(n.h2,{id:"put"},"PUT"),"\n",s.createElement(n.p,null,"데이터를 업데이트 하는 요청을 제작하기 위해서 먼저 특정한 데이터만 가져오는 코드를 구현하려 합니다."),"\n",s.createElement(n.pre,null,s.createElement(n.code,{className:"language-python"},"# mysite/account/views.py\r\nclass AccountDetail(APIView):\r\n    def get(self, request, id):\r\n        model = Account.objects.get(id=id)\r\n        serializer = AccountSerializer(model)\r\n        return Response(serializer.data)\n")),"\n",s.createElement(n.p,null,"AccountDetail이라는 새로운 클래스를 하나 생성하였습니다.\r\n이제 URL을 통해 API에 접근할 수 있도록 urls.py에 또 추가를 해야겠죠?"),"\n",s.createElement(n.pre,null,s.createElement(n.code,{className:"language-python"},"# mysite/mysite/urls.py\r\nurlpatterns = [\r\n    ...\r\n    path('api/account_list/<int:id>', AccountDetail.as_view(), name='account_list')\r\n]\n")),"\n",s.createElement(n.p,null,"Account의 ID는 Int 형태로 저장되고 있기 때문에 위와 같은 형태로 값을 받아서 API에 접근하려 합니다.\r\n이를 테스트해보면 다음과 같은 결과가 나오죠.\r\n/api/account/1 로 접속을 하도록 하겠습니다."),"\n",s.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<figure class="gatsby-resp-image-figure" style="">\n    <span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 704px; "\n    >\n      <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 27.84090909090909%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAo0lEQVR42qXPQQ7CIBCFYe7vEdx5BPduPIM7Y9LEKEXbSkuZGWrgCXXTbXXxhUmG/AF11xq61qiqCsYYpATEGPOZZst5KcbvDkjYHs7YHS/Y7E9QvR3gnAezQCQghOkPb6jrrUbTDZnD6CWHw2pSyAQmgXq2FtYR7Mjw5UJZ/BAtqAS9aeEfHah5wdd5zq9l+iNIXQ8qEevAwzgTkvkLazFP+ADPnNCyY1XHgAAAAABJRU5ErkJggg==\'); background-size: cover; display: block;"\n  ></span>\n  <img\n        class="gatsby-resp-image-image"\n        alt="GET 요청"\n        title=""\n        src="/static/a4e2a652c586bae49ffa9d7d5fde31ed/5ebd7/django_account_detail_get.png"\n        srcset="/static/a4e2a652c586bae49ffa9d7d5fde31ed/06437/django_account_detail_get.png 176w,\n/static/a4e2a652c586bae49ffa9d7d5fde31ed/ba1c3/django_account_detail_get.png 352w,\n/static/a4e2a652c586bae49ffa9d7d5fde31ed/5ebd7/django_account_detail_get.png 704w,\n/static/a4e2a652c586bae49ffa9d7d5fde31ed/fd84e/django_account_detail_get.png 1056w,\n/static/a4e2a652c586bae49ffa9d7d5fde31ed/1132d/django_account_detail_get.png 1158w"\n        sizes="(max-width: 704px) 100vw, 704px"\n        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n        loading="lazy"\n        decoding="async"\n      />\n    </span>\n    <figcaption class="gatsby-resp-image-figcaption">GET 요청</figcaption>\n  </figure>'}}),"\n",s.createElement(n.p,null,"접속하는 ID 값으로 어떠한 데이터에 접근하려고 하는지 명시해줄 수 있습니다.\r\n이를 조금 더 이용하여 데이터를 업데이트 하는 PUT API를 생성하도록 하죠."),"\n",s.createElement(n.pre,null,s.createElement(n.code,{className:"language-python"},"# mysite/account/views.py\r\nclass AccountDetail(APIView):\r\n    def get(self, request, id):\r\n        ...\r\n\r\n    def put(self, request, id):\r\n        model = Account.objects.get(id=id)\r\n        serializer = AccountSerializer(model, data=request.data)\r\n        if serializer.is_valid():\r\n            serializer.save()\r\n            return Response(serializer.data, status=status.HTTP_200_OK)\r\n        return Response(serializer.errors, status=status.HTTP_400_BAD_REQUEST)\n")),"\n",s.createElement(n.p,null,"POST랑 굉장히 비슷한 형태를 가지고 있습니다.\r\n이제 /api/account/1 에 PUT으로 password를 변경해보겠습니다."),"\n",s.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<figure class="gatsby-resp-image-figure" style="">\n    <span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 704px; "\n    >\n      <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 32.95454545454546%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAkElEQVR42q3PMQ7CMAyF4dz/VGxcgAGJhYU2QkDT2LETSvuatMoBAkT6Fg+/HcNMsNaCvN845xBj/IqqwoQQYPsej+cLngUjBQRNkPhuxhL3IBNh8JyHeUv2mWcsQDNJ0x4UCdt1S5n+8LQGi7EE8ccgcf66xmaUaUq43j0u3QAjIqhqvAXnQ6akOJ47HE43rCvoIp9yNcOXAAAAAElFTkSuQmCC\'); background-size: cover; display: block;"\n  ></span>\n  <img\n        class="gatsby-resp-image-image"\n        alt="PUT 요청"\n        title=""\n        src="/static/ed6a19a341889f35d4c6ab3616cc1a79/5ebd7/django_account_detail_put.png"\n        srcset="/static/ed6a19a341889f35d4c6ab3616cc1a79/06437/django_account_detail_put.png 176w,\n/static/ed6a19a341889f35d4c6ab3616cc1a79/ba1c3/django_account_detail_put.png 352w,\n/static/ed6a19a341889f35d4c6ab3616cc1a79/5ebd7/django_account_detail_put.png 704w,\n/static/ed6a19a341889f35d4c6ab3616cc1a79/fd84e/django_account_detail_put.png 1056w,\n/static/ed6a19a341889f35d4c6ab3616cc1a79/b7936/django_account_detail_put.png 1155w"\n        sizes="(max-width: 704px) 100vw, 704px"\n        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n        loading="lazy"\n        decoding="async"\n      />\n    </span>\n    <figcaption class="gatsby-resp-image-figcaption">PUT 요청</figcaption>\n  </figure>'}}),"\n","\r\n","\n",s.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<figure class="gatsby-resp-image-figure" style="">\n    <span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 704px; "\n    >\n      <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 26.704545454545453%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAkElEQVR42qXPwQ7CIAwGYN7/WYxXX8F48RGWGYNMMWwMKAXhd7izh2mTr4em+dMKrTWUUhiGATcpwcxoVUpFrd+VUj573X3G7tjjcL5if+ohnA8w4wRrPSgmxI0SZ+S0euUMIaVCd5FQD4Pn6EDEm4WwIkoQwROcsfCTW4YRFPin0KZdLFqjJYzMjNDepv8C343bg25k214lAAAAAElFTkSuQmCC\'); background-size: cover; display: block;"\n  ></span>\n  <img\n        class="gatsby-resp-image-image"\n        alt="PUT 에러"\n        title=""\n        src="/static/9d0a05e287225be671c398657bfd013d/5ebd7/django_account_detail_put_error.png"\n        srcset="/static/9d0a05e287225be671c398657bfd013d/06437/django_account_detail_put_error.png 176w,\n/static/9d0a05e287225be671c398657bfd013d/ba1c3/django_account_detail_put_error.png 352w,\n/static/9d0a05e287225be671c398657bfd013d/5ebd7/django_account_detail_put_error.png 704w,\n/static/9d0a05e287225be671c398657bfd013d/fd84e/django_account_detail_put_error.png 1056w,\n/static/9d0a05e287225be671c398657bfd013d/6be49/django_account_detail_put_error.png 1160w"\n        sizes="(max-width: 704px) 100vw, 704px"\n        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n        loading="lazy"\n        decoding="async"\n      />\n    </span>\n    <figcaption class="gatsby-resp-image-figcaption">PUT 에러</figcaption>\n  </figure>'}}),"\n",s.createElement(n.p,null,"PUT 요청을 할 때, account_number라는 field를 주지 않아서 발생하는 오류입니다.\r\n하지만 우리는 password에 대해서만 변경하고 싶으니 Account의 Serializer를 약간 수정하도록 하겠습니다."),"\n",s.createElement(n.pre,null,s.createElement(n.code,{className:"language-python"},"# mysite/account/serializer.py\r\nclass AccountSerializer(serializers.ModelSerializer):\r\n    account_number = serializers.CharField(required=False)\r\n    password = serializers.CharField(required=False)\r\n    ...\n")),"\n",s.createElement(n.p,null,"그리고 아까와 동일한 요청을 보내면 아래와 같은 결과가 생성되는 것을 볼 수 있습니다."),"\n",s.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<figure class="gatsby-resp-image-figure" style="">\n    <span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 704px; "\n    >\n      <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 28.40909090909091%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAApElEQVR42qWQMQ7CMAxFc3+OwMwJmNmQOAELSNABNUALaZI2ToKaj9PCAFvB0tO3PDxbFlJKnJmiOMIYi1wpJfR9+sjvWSbXZldhttxisT5gvtpDKKVhWUTk4X1ACHES5CMchYHci1N5QXXTULplaZiMZ4IfM/ICUSuDpiVohl4bfxEP8nxhW17RVXe4WnEqOOv+E1JjQJp/2Ix4203+45sYH3gCdPbQu4MpBdkAAAAASUVORK5CYII=\'); background-size: cover; display: block;"\n  ></span>\n  <img\n        class="gatsby-resp-image-image"\n        alt="PUT 결과"\n        title=""\n        src="/static/b6a6363801c0ff3e0be6c1b014045ef3/5ebd7/django_account_detail_put_result.png"\n        srcset="/static/b6a6363801c0ff3e0be6c1b014045ef3/06437/django_account_detail_put_result.png 176w,\n/static/b6a6363801c0ff3e0be6c1b014045ef3/ba1c3/django_account_detail_put_result.png 352w,\n/static/b6a6363801c0ff3e0be6c1b014045ef3/5ebd7/django_account_detail_put_result.png 704w,\n/static/b6a6363801c0ff3e0be6c1b014045ef3/fd84e/django_account_detail_put_result.png 1056w,\n/static/b6a6363801c0ff3e0be6c1b014045ef3/74d4e/django_account_detail_put_result.png 1157w"\n        sizes="(max-width: 704px) 100vw, 704px"\n        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n        loading="lazy"\n        decoding="async"\n      />\n    </span>\n    <figcaption class="gatsby-resp-image-figcaption">PUT 결과</figcaption>\n  </figure>'}}),"\n",s.createElement(n.h2,{id:"delete"},"DELETE"),"\n",s.createElement(n.p,null,"이제 데이터를 삭제하는 DELETE를 구현해보죠."),"\n",s.createElement(n.pre,null,s.createElement(n.code,{className:"language-python"},"# mysite/account/views.py\r\nclass AccountDetail(APIView):\r\n    ...\r\n    def delete(self, request, id):\r\n        model = Account.objects.get(id=id)\r\n        model.delete()\r\n        return Response(status=status.HTTP_204_NO_CONTENT)\n")),"\n",s.createElement(n.p,null,"모델을 찾아 삭제해주기만 하면 완료됩니다.\r\n이제 해당 페이지에 들어가면 DELETE 버튼이 생성됩니다.\r\n이를 누르면 데이터가 삭제되는 것을 확인할 수 있습니다.\r\n",s.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<figure class="gatsby-resp-image-figure" style="">\n    <span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 704px; "\n    >\n      <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 27.84090909090909%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAoklEQVR42qXQzQrCMAwH8L4/ePANPAg+goJXD3sDD8J2sQ63udqu6dfY/rY7iOJpLvCDhEBIwsqyBOccRZFDa40UwzBgHMe3zzrlKVxdQ203yI4ZVocLdqcc6/0ZTEkFIgvvArzvZwpfQujB+K1C03ZohIJUBGv931zEHlJDkZuY1IibLhnK9PUOqlqYRoBqAaPNsoFWSNhnBxtPnnT085s5XqDGz5NdjZY4AAAAAElFTkSuQmCC\'); background-size: cover; display: block;"\n  ></span>\n  <img\n        class="gatsby-resp-image-image"\n        alt="DELETE 요청"\n        title=""\n        src="/static/9809c80e62003a3a4a337881f9b6f455/5ebd7/django_account_detail_delete.png"\n        srcset="/static/9809c80e62003a3a4a337881f9b6f455/06437/django_account_detail_delete.png 176w,\n/static/9809c80e62003a3a4a337881f9b6f455/ba1c3/django_account_detail_delete.png 352w,\n/static/9809c80e62003a3a4a337881f9b6f455/5ebd7/django_account_detail_delete.png 704w,\n/static/9809c80e62003a3a4a337881f9b6f455/fd84e/django_account_detail_delete.png 1056w,\n/static/9809c80e62003a3a4a337881f9b6f455/105d8/django_account_detail_delete.png 1170w"\n        sizes="(max-width: 704px) 100vw, 704px"\n        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n        loading="lazy"\n        decoding="async"\n      />\n    </span>\n    <figcaption class="gatsby-resp-image-figcaption">DELETE 요청</figcaption>\n  </figure>'}})),"\n",s.createElement(n.h2,{id:"api_view"},"@api_view"),"\n",s.createElement(n.p,null,"위에서 APIView를 이용한 클래스 기반 API를 작성하였습니다.\r\n하지만 아래와 같이 함수 기반으로 API를 작성할 수도 있죠."),"\n",s.createElement(n.pre,null,s.createElement(n.code,{className:"language-python"},'# mysite/account/views.py\r\n@api_view(["GET", "PUT", "DELETE"])\r\ndef account_func(request, id):\r\n    if request.method == "GET":\r\n        model = Account.objects.get(id=id)\r\n        serializer = AccountSerializer(model)\r\n        print(serializer.data)\r\n        return Response(serializer.data, status=status.HTTP_200_OK)\r\n            \r\n    elif request.method == "PUT":\r\n        model = Account.objects.get(id=id)\r\n        serializer = AccountSerializer(model, data=request.data)\r\n        if serializer.is_valid():\r\n            serializer.save()\r\n            return Response(serializer.data, status=status.HTTP_200_OK)\r\n        return Response(serializer.errors, status=status.HTTP_400_BAD_REQUEST)\r\n    \r\n    elif request.method == "DELETE":\r\n        model = Account.objects.get(id=id)\r\n        model.delete()\r\n        return Response(status=status.HTTP_204_NO_CONTENT)\n')),"\n",s.createElement(n.pre,null,s.createElement(n.code,{className:"language-python"},"# mysite/mysite/urls.py\r\nurlpatterns = [\r\n    ...\r\n    path('api/account_func/<int:id>', account_func, name='account_func'),\r\n]\n")),"\n",s.createElement(n.p,null,"간단한 API는 굳이 클래스 기반으로 만들 필요 없이 함수 기반으로 만들어도 될 것 같습니다."),"\n",s.createElement(n.h1,{id:"user"},"User"),"\n",s.createElement(n.p,null,"대략적인 API를 구현하는 방법은 알게 되었으니, 처음부터 다시 프로젝트를 만들어서 사용자와 계좌 모델을 만들고 돈을 송금하는 Usecase를 만들어볼게요."),"\n",s.createElement(n.p,null,"Django를 설치하고 DB를 설정한 후 migrate 명령을 실행했을 때 DB에 처음 보는 테이블이 생성되는 것을 볼 수 있었습니다.\r\n특히 기본적으로 생성된 테이블에서 auth_user라는 테이블을 볼 수 있죠.\r\n해당 테이블은 아래와 같은 Field들을 가지고 있습니다."),"\n",s.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<figure class="gatsby-resp-image-figure" style="">\n    <span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; "\n    >\n      <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 39.20454545454546%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABdklEQVR42lWSh27DIBRF/f+/WDVp4yybYfbGtw+3aVUkC5DR4Q6m5CSWlSHGiDGE8Hg+BVJKx761RvsnjDbIpeAmLJ1N2KSEcgnKZ8wXBcY7lAImJRasBGTrit46jCOguKO0/AvUWn+ve6d/GrFUzMrBhQROs9AON26gdMekjYEUAtf5ipwzgo1gs0AjNS9g+VnXoVY6AhbcnSBggTAeLQbUWunEjkne7uAEPJ/OiCHApoizeCK3b0gnVdYa7Pt+KLxzBV863sie84EUeuhswLw8LpzUth0KH48HKlnxxeKiPhBr+gUOy73v9DVsnPIm4MkAyVvKVkMVyjAyupCA4/C6jBzXoRg6GJz4Ban+laIo7ZfClUsEAr5TrCF4bNpCJYXVM9QBlNQWZwyc8wNgzQ62EJkAL4UDOkZpO963Ri5oVjtk7LjajpobwevhYjJUiiDLl09SlROipVzm5V8po6xXy1zRs6kds8XxfJQLyNYibBRLa/gCt/pp7GgXguIAAAAASUVORK5CYII=\'); background-size: cover; display: block;"\n  ></span>\n  <img\n        class="gatsby-resp-image-image"\n        alt="Default User"\n        title=""\n        src="/static/a6058ac11185c296b3f977e8a70f9644/c5bb3/mysql_default_auth_user_table.png"\n        srcset="/static/a6058ac11185c296b3f977e8a70f9644/06437/mysql_default_auth_user_table.png 176w,\n/static/a6058ac11185c296b3f977e8a70f9644/ba1c3/mysql_default_auth_user_table.png 352w,\n/static/a6058ac11185c296b3f977e8a70f9644/c5bb3/mysql_default_auth_user_table.png 680w"\n        sizes="(max-width: 680px) 100vw, 680px"\n        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n        loading="lazy"\n        decoding="async"\n      />\n    </span>\n    <figcaption class="gatsby-resp-image-figcaption">Default User</figcaption>\n  </figure>'}}),"\n",s.createElement(n.p,null,"여기에 추가적으로 필요한 정보를 더해 accounts라는 앱을 생성하도록 하겠습니다.\r\n",s.createElement(n.code,null,"Django"),"에서는 기본적으로 제공하는 ",s.createElement(n.code,null,"AbstractBaseUser")," 객체를 이용하면 쉽게 커스텀한 User를 생성할 수 있습니다."),"\n",s.createElement(n.pre,null,s.createElement(n.code,{className:"language-python"},"# toss/accounts/models.py\r\nfrom django.db import models\r\nfrom django.contrib.auth.models import AbstractBaseUser, BaseUserManager, PermissionsMixin\r\n\r\nclass UserManager(BaseUserManager):\r\n    def __create_user__(self, email, password, **extra_fields):\r\n        if not email:\r\n            raise ValueError('[UserManager] email must be set.')\r\n        if not password:\r\n            raise ValueError('[UserManager] password must be set.')             \r\n        email = self.normalize_email(email)\r\n        user = self.model(email=email, **extra_fields)\r\n        user.set_password(password)\r\n        user.save(using=self._db)\r\n        return user\r\n    \r\n    def create_user(self, email, password, **extra_fields):\r\n        extra_fields.setdefault('is_staff', False)\r\n        extra_fields.setdefault('is_superuser', False)\r\n        return self.__create_user__(email, password, **extra_fields)\r\n    \r\n    def create_superuser(self, email, password, **extra_fields):\r\n        extra_fields.setdefault('is_staff', True)\r\n        extra_fields.setdefault('is_superuser', True)\r\n        return self.__create_user__(email, password, **extra_fields)\r\n    \r\nclass User(AbstractBaseUser, PermissionsMixin):\r\n    email = models.CharField(max_length=30, unique=True)\r\n    password = models.CharField(max_length=128)\r\n    username = models.CharField(max_length=30)\r\n    age = models.PositiveIntegerField({'max_value': 200}, null=True)\r\n    sex = models.CharField(max_length=1, null=True)\r\n    last_login = models.DateTimeField(auto_now_add=True)\r\n    is_staff = models.BooleanField(default=False)\r\n    is_superuser = models.BooleanField(default=False)\r\n    is_active = models.BooleanField(default=True)\r\n    date_joined = models.DateTimeField(auto_now_add=True)\r\n    \r\n    objects = UserManager()\r\n    USERNAME_FIELD = 'email'\r\n    \r\n    def __str__(self):\r\n        return self.email\n")),"\n",s.createElement(n.p,null,"기본 Field와는 다르게 User를 구성하였습니다.\r\n여기서 ",s.createElement(n.code,null,"BaseUserManager"),"는 User를 생성하는 역할을 하는 ",s.createElement(n.code,null,"Django"),"에서 기본적으로 지원하는 클래스입니다.\r\nUser를 생성할 때 비밀번호만 set_password() 함수를 이용해서 저장하는데,\r\n이는 기본적으로 ",s.createElement(n.code,null,"BaseUserManager"),"클래스의 set_password 함수를 이용해야 암호화를 통해 저장되기 때문입니다."),"\n",s.createElement(n.p,null,s.createElement(n.code,null,"PermissionsMixin"),"는 권한과 관련된 부분인데 이는 뒤에서 다루도록 하겠습니다."),"\n",s.createElement(n.p,null,s.createElement(n.code,null,"Django"),"에게 APP을 등록하고 우리가 User 모델을 따로 정의했다는 사실을 알려주기 위해 settings.py에 아래 내용을 추가해야 합니다."),"\n",s.createElement(n.pre,null,s.createElement(n.code,{className:"language-python"},"# toss/toss/settings.py\r\nINSTALLED_APPS = [\r\n    ...\r\n    \"accounts\"\r\n]\r\n...\r\nAUTH_USER_MODEL = 'accounts.User'\n")),"\n",s.createElement(n.p,null,"이제 makemigrations, migrate 를 실행하고 생성된 테이블을 확인해보죠."),"\n",s.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<figure class="gatsby-resp-image-figure" style="">\n    <span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 667px; "\n    >\n      <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 36.36363636363637%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAA7DAAAOwwHHb6hkAAABN0lEQVR42m2R2XLDMAhF8/+/2DbNYrt1rH2XLOuWyEk6nSkvYhBcDnDgQoAtDHerdcPbRYIbi6dZa5FS6v5NB5iQ6Y3QPmOSHsoWXL4tzmOC98DBaI1pmmC6SMPsByx+eQnGGLGua/eN0sjeYnCAihsMm5FqhMgz3Gp6zkEIjnEYkXMGAWIkYpPMS9A5R387oTALQpS4Um8eKuV6BKpjTsHEsAsqKftYrTVs20YjMNigX4K11h6/mzYCKRgMdidkXCKVBOMlYvIPQaXweTxCStUD4zuDZr+EpZQuerdZU3EoD8LWCXPKcFwhuQehpr1wzklQYmvA9wyEgL+ERN+b0e4ETf/lGmRq+KC+eW2IuaGs7UkocT6dcLvRIaiQXTm8sP8SLnRl62M/iggbJm5QiNALRcfaCX8A4mAeagaaiqcAAAAASUVORK5CYII=\'); background-size: cover; display: block;"\n  ></span>\n  <img\n        class="gatsby-resp-image-image"\n        alt="Custom User"\n        title=""\n        src="/static/6aefaa796241072a8acb1e792689ce5d/295bd/mysql_custom_user_table.png"\n        srcset="/static/6aefaa796241072a8acb1e792689ce5d/06437/mysql_custom_user_table.png 176w,\n/static/6aefaa796241072a8acb1e792689ce5d/ba1c3/mysql_custom_user_table.png 352w,\n/static/6aefaa796241072a8acb1e792689ce5d/295bd/mysql_custom_user_table.png 667w"\n        sizes="(max-width: 667px) 100vw, 667px"\n        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n        loading="lazy"\n        decoding="async"\n      />\n    </span>\n    <figcaption class="gatsby-resp-image-figcaption">Custom User</figcaption>\n  </figure>'}}),"\n",s.createElement(n.p,null,"이제 변경한 Field에 민감한 데이터를 제외하고 ",s.createElement(n.code,null,"Serializer"),"를 통해 객체와 데이터를 변경하는 부분을 구현합시다."),"\n",s.createElement(n.pre,null,s.createElement(n.code,{className:"language-python"},"# toss/accounts/serializers.py\r\nfrom .models import User\r\nfrom rest_framework import serializers\r\n\r\nclass UserSerializer(serializers.ModelSerializer):\r\n    username = serializers.CharField(required=False)\r\n    age = serializers.IntegerField(required=False)\r\n    sex = serializers.CharField(required=False)\r\n    # secret\r\n    password = serializers.CharField(write_only=True)\r\n    is_staff = serializers.BooleanField(write_only=True)\r\n    is_superuser = serializers.BooleanField(write_only=True)\r\n    \r\n    class Meta:\r\n        model = User\r\n        fields = '__all__'\n")),"\n",s.createElement(n.p,null,s.createElement(n.code,null,"Serializer"),"에서 모든 Field에 대해 접근할 수 있어야 생성시 각 Field에 대해 데이터를 전달해줄 수 있습니다.\r\n하지만 비밀번호와 같은 정보는 GET을 통해 공개되어서는 안되는 중요한 정보이죠.\r\n그래서 write_only 값을 주어 객체에서 변환시에 해당 값들을 변환하지 않도록 하여 정보를 전달하지 않습니다."),"\n",s.createElement(n.p,null,"이제 각 객체에 대해 API를 생성하도록 하겠습니다."),"\n",s.createElement(n.pre,null,s.createElement(n.code,{className:"language-python"},"# toss/accounts/views.py\r\nfrom rest_framework import generics\r\nfrom .serializers import UserSerializer\r\nfrom .models import User\r\n\r\nclass UserList(generics.ListCreateAPIView):\r\n    queryset = User.objects.all()\r\n    serializer_class = UserSerializer\r\n    \r\nclass UserDetail(generics.RetrieveUpdateDestroyAPIView):\r\n    queryset = User.objects.all()\r\n    serializer_class = UserSerializer\n")),"\n",s.createElement(n.p,null,"기존에 구현한 방식은 POST와 PUT이 거의 비슷한 형태를 가지는 것과 같이 중복되는 코드로 인해 가독성이 떨어집니다.\r\ngenerics를 이용하면 조금 더 편리하게 API를 설계할 수 있습니다.\r\n실제로 해당 코드의 구현부분을 가면 아래와 같이 정의되어 있습니다."),"\n",s.createElement(n.pre,null,s.createElement(n.code,{className:"language-python"},'# rest_framework/generics.py\r\nclass ListCreateAPIView(mixins.ListModelMixin,\r\n                        mixins.CreateModelMixin,\r\n                        GenericAPIView):\r\n    """\r\n    Concrete view for listing a queryset or creating a model instance.\r\n    """\r\n    def get(self, request, *args, **kwargs):\r\n        return self.list(request, *args, **kwargs)\r\n\r\n    def post(self, request, *args, **kwargs):\r\n        return self.create(request, *args, **kwargs)\n')),"\n",s.createElement(n.p,null,"GET과 POST에 대해 정의를 하고 있죠.\r\n이를 활용하여 가독성이 높은 코드를 간단하게 생성할 수 있겠습니다."),"\n",s.createElement(n.pre,null,s.createElement(n.code,{className:"language-python"},'# toss/accounts/urls.py\r\nfrom django.contrib import admin\r\nfrom django.urls import path\r\nfrom .views import UserList, UserDetail\r\n\r\nurlpatterns = [\r\n    path("user_list/", UserList.as_view()),\r\n    path("user/<int:pk>", UserDetail.as_view())\r\n]\n')),"\n",s.createElement(n.pre,null,s.createElement(n.code,{className:"language-python"},'# toss/toss/urls.py\r\nurlpatterns = [\r\n    ...\r\n    path("api/user/", include("accounts.urls"))\r\n]\n')),"\n",s.createElement(n.p,null,"generics로 생성한 클래스 기반 규칙에 맞춰 URL를 정의하였습니다.\r\n이렇게 앱단위로 URL을 정의한 후 프로젝트의 urls.py 에서 아래와 같이 설정하면 ",s.createElement(n.code,null,"[프로젝트 URL]/[앱 URL]")," 형식으로 접근할 수 있습니다."),"\n",s.createElement(n.p,null,"사실 Custom User를 만드는 위 방법 이외에도 여러 가지가 존재합니다."),"\n",s.createElement(n.ul,null,"\n",s.createElement(n.li,null,"새로운 테이블과 일대일 연결을 통해 사용자 정보를 유지하면서 권한과 상관 없는 사용자 데이터를 저장하는 방법."),"\n",s.createElement(n.li,null,s.createElement(n.code,null,"Proxy Model"),"을 사용하여 테이블의 변경 없이 정렬 순서나 메소드만을 추가하는 방법."),"\n",s.createElement(n.li,null,s.createElement(n.code,null,"AbstractUser Model"),"을 사용하여 로그인 인증 처리 부분은 ",s.createElement(n.code,null,"Django"),"의 것을 이용하면서 사용자 정의 필드를 추가하는 방법."),"\n",s.createElement(n.li,null,s.createElement(n.code,null,"AbstractBaseUser Model"),"을 사용하여 인증 절차를 직접 구현하는 방법."),"\n"),"\n",s.createElement(n.p,null,"아래의 두 방법은 프로젝트를 처음 시작할 때 User에 관한 정보를 탄탄하게 설계하고 시작하는 것이 좋습니다."),"\n",s.createElement(n.h1,{id:"authentication"},"Authentication"),"\n",s.createElement(n.p,null,"이제 생성된 User를 이용하여 사용자 인증을 하는 방법을 알아보도록 할게요.\r\n",s.createElement(n.code,null,"DRF"),"는 기본적으로 Session 방식을 채택하고 있습니다.\r\n이를 JWT 방식으로 변경하여 개발해보죠."),"\n",s.createElement(n.p,null,"먼저 ",s.createElement(n.code,null,"simple-jwt")," 패키지를 설치합니다."),"\n",s.createElement(n.pre,null,s.createElement(n.code,null,"$ pip install djangorestframework-simplejwt\n")),"\n",s.createElement(n.p,null,"이제 settings.py 에 여러 우리가 ",s.createElement(n.code,null,"simple-jwt")," 를 사용한다는 것을 알려야 합니다."),"\n",s.createElement(n.pre,null,s.createElement(n.code,{className:"language-python"},"# toss/toss/settings.py\r\nINSTALLED_APPS = [\r\n    ...\r\n    \"rest_framework_simplejwt\"\r\n]\r\n\r\nREST_FRAMEWORK = {\r\n    \"DEFAULT_AUTHENTICATION_CLASSES\": [\r\n        \"rest_framework_simplejwt.authentication.JWTAuthentication\"\r\n    ]\r\n}\r\n\r\nSIMPLE_JWT = {\r\n    'ACCESS_TOKEN_LIFETIME': timedelta(minutes=30),\r\n    'REFRESH_TOKEN_LIFETIME': timedelta(days=7),\r\n    'ROTATE_REFRESH_TOKENS': True,\r\n    'BLACKLIST_AFTER_ROTATION': True,\r\n    'UPDATE_LAST_LOGIN': True,\r\n\r\n    'ALGORITHM': 'HS256',\r\n    'SIGNING_KEY': SECRET_KEY,\r\n    'VERIFYING_KEY': None,\r\n    'AUDIENCE': None,\r\n    'ISSUER': None,\r\n    'JWK_URL': None,\r\n    'LEEWAY': 0,\r\n\r\n    'AUTH_HEADER_TYPES': ('Bearer',),\r\n    'AUTH_HEADER_NAME': 'HTTP_AUTHORIZATION',\r\n    'USER_ID_FIELD': 'id',\r\n    'USER_ID_CLAIM': 'email',\r\n    'USER_AUTHENTICATION_RULE': 'rest_framework_simplejwt.authentication.default_user_authentication_rule',\r\n\r\n    'AUTH_TOKEN_CLASSES': ('rest_framework_simplejwt.tokens.AccessToken',),\r\n    'TOKEN_TYPE_CLAIM': 'token_type',\r\n    'TOKEN_USER_CLASS': 'rest_framework_simplejwt.models.TokenUser',\r\n\r\n    'JTI_CLAIM': 'jti',\r\n\r\n    'SLIDING_TOKEN_REFRESH_EXP_CLAIM': 'refresh_exp',\r\n    'SLIDING_TOKEN_LIFETIME': timedelta(minutes=5),\r\n    'SLIDING_TOKEN_REFRESH_LIFETIME': timedelta(days=1),\r\n}\n")),"\n",s.createElement(n.p,null,"INSTALLED_APPS 에서 ",s.createElement(n.code,null,"simple-jwt"),"를 사용한다는 것을 명시해주었습니다.\r\nREST_FRAMEWORK 에서는 기본 authentication 으로 ",s.createElement(n.code,null,"simple-jwt"),"을 사용하도록 설정해주었죠.\r\n마지막으로 토큰에 대한 설정값을 명시해주었습니다.\r\n설정에 대한 설명은 아래 링크에서 조금 더 자세하게 확인할 수 있어요."),"\n",s.createElement(n.p,null,s.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span class="link-preview-container">\n            \n    <a target="_blank" rel="noopener noreferrer" href="https://django-rest-framework-simplejwt.readthedocs.io/en/latest/settings.html">\n        Some of Simple JWT’s behavior can be customized through settings variables in settings.py\n    </a>\n            \n            <img\n                loading="lazy"\n                decoding="async"\n                alt="site preview image"\n                src="/static/7f1762f92d3b523328472daef59b6a51/4cda9/13da9774.jpg"\n                srcset="/static/7f1762f92d3b523328472daef59b6a51/4cda9/13da9774.jpg 1x,\n/static/7f1762f92d3b523328472daef59b6a51/3ad8d/13da9774.jpg 1.5x,\n/static/7f1762f92d3b523328472daef59b6a51/c60e9/13da9774.jpg 2x"\n                style="background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAPABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAUCAwT/xAAVAQEBAAAAAAAAAAAAAAAAAAABAv/aAAwDAQACEAMQAAABcWr90kwF/8QAGhAAAQUBAAAAAAAAAAAAAAAAAQADBBARQf/aAAgBAQABBQIWJLW9X//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABURAQEAAAAAAAAAAAAAAAAAAAEA/9oACAECAQE/AVi//8QAFhABAQEAAAAAAAAAAAAAAAAAEBGh/9oACAEBAAY/AmXH/8QAGhAAAwEAAwAAAAAAAAAAAAAAAAERIRAxcf/aAAgBAQABPyH0XeGkrWxNC6P/2gAMAwEAAgADAAAAEJ/v/8QAFREBAQAAAAAAAAAAAAAAAAAAARD/2gAIAQMBAT8QZ//EABYRAQEBAAAAAAAAAAAAAAAAABEAAf/aAAgBAgEBPxArTjf/xAAbEAEBAAMAAwAAAAAAAAAAAAABEQAhMRBBUf/aAAgBAQABPxBN6lwQhjvDmsCkwBXtxT0l++L/2Q==\'); background-size: cover;"\n            />\n            \n        </span>'}})),"\n",s.createElement(n.p,null,"이제 토큰을 획득하고, 토큰을 갱신하는 view를 추가해줍니다."),"\n",s.createElement(n.pre,null,s.createElement(n.code,{className:"language-python"},'# toss/toss/urls.py\r\nfrom rest_framework_simplejwt.views import TokenObtainPairView, TokenRefreshView\r\n\r\nurlpatterns = [\r\n    ...\r\n    path("api/token/", TokenObtainPairView.as_view()),\r\n    path("api/token/refresh/", TokenRefreshView.as_view())\r\n]\n')),"\n",s.createElement(n.p,null,"이제 해당 URL로 접속해서 이메일과 패스워드를 이용하여 아래와 같이 토큰을 받을 수 있습니다."),"\n",s.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 704px; "\n    >\n      <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 50.56818181818182%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABUklEQVR42o2SAW6EIBBFvf8deooeoAdoe4NumtS6ogKKlQEU/R2U7jZNN1nMCwOYP58ZirquIYRAWX7gfD6jqip47xFjxLIsWNcVaWzbhr/jZ8vPEQ9Pb3g5SRR9P6DrJJRS+6y1hpQKxhhYaxHCzKIbJ1h38VukhIlCaxaUGpY8O5sPXNjnkGN3B0RhT1607Kpq2ZWx+LIejkUOwq/4H0Imx8SEeUHhWIT6L5A0oLY/6BIDqNF5PVzPErxvBdNkaoVJKLh+RDGaEZ1oIEULWTfoMimW5zxfaPezvpUgM4EGNjLaS+wnQpEKmjq6rhFx4wJnYlrfIJ1v+YvLjIUIPgTMS7qycyAmdVUPBmWt8Sl6rmmAGm9grsjBQw0s6Czm4A/BaZrQNAKKOy7khFbT/uM9dExvHEqureRrHw7ZchJN747IZegurCUs7Ozx+R2vpxbfDG8CqBNctx8AAAAASUVORK5CYII=\'); background-size: cover; display: block;"\n  ></span>\n  <img\n        class="gatsby-resp-image-image"\n        alt="django jwt result"\n        title=""\n        src="/static/e4f4603b608b71443075b9619e22cf59/5ebd7/django_jwt_result.png"\n        srcset="/static/e4f4603b608b71443075b9619e22cf59/06437/django_jwt_result.png 176w,\n/static/e4f4603b608b71443075b9619e22cf59/ba1c3/django_jwt_result.png 352w,\n/static/e4f4603b608b71443075b9619e22cf59/5ebd7/django_jwt_result.png 704w,\n/static/e4f4603b608b71443075b9619e22cf59/fd84e/django_jwt_result.png 1056w,\n/static/e4f4603b608b71443075b9619e22cf59/96220/django_jwt_result.png 1165w"\n        sizes="(max-width: 704px) 100vw, 704px"\n        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n        loading="lazy"\n        decoding="async"\n      />\n    </span>'}}),"\n",s.createElement(n.p,null,"기존의 Refresh Token을 이용하여 새로운 Token을 받아올 수 있죠."),"\n",s.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 704px; "\n    >\n      <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 46.590909090909086%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABKUlEQVR42p2S0U6EMBBF+f+PMX6FiT756JsKK41QOi2UtltgrzOguDGuGpuc3JtpGWamLZRSqOsaZVmiqiqklDBNMzMh54x5niHrdDrtuntsa5oXXN094/7JoOj7Hl1nYIzB0HuMY4D3wrj6lDInX37l40cFkUWrDRwniTGvCc6J8fgnfGDl80XbaKiGK3QjBh8vfpC+aAxn+2EjHTlhlPZai/HVwNcaQ91ieGEU+0Oz+br9jAscl7MrSrSFrxpEbVF479Fxy9QRaNWfMbqDM5YrTUxECgzPOsjI2BfLskCQW5Ub/Y7pQlzI/CqOXNSU5XVwyyEEvs0RWms4a9E7ByuwFxx7MrT7TS3ofZ+I4IcBh4bQUM8z5LIlqeh/CNzmzNVd3z7i5kHhDVF6tmhVH/qoAAAAAElFTkSuQmCC\'); background-size: cover; display: block;"\n  ></span>\n  <img\n        class="gatsby-resp-image-image"\n        alt="django jwt refresh"\n        title=""\n        src="/static/1fbd9bcbf47ed1856bf09f345995dc1f/5ebd7/django_jwt_refresh.png"\n        srcset="/static/1fbd9bcbf47ed1856bf09f345995dc1f/06437/django_jwt_refresh.png 176w,\n/static/1fbd9bcbf47ed1856bf09f345995dc1f/ba1c3/django_jwt_refresh.png 352w,\n/static/1fbd9bcbf47ed1856bf09f345995dc1f/5ebd7/django_jwt_refresh.png 704w,\n/static/1fbd9bcbf47ed1856bf09f345995dc1f/fd84e/django_jwt_refresh.png 1056w,\n/static/1fbd9bcbf47ed1856bf09f345995dc1f/cdef6/django_jwt_refresh.png 1163w"\n        sizes="(max-width: 704px) 100vw, 704px"\n        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n        loading="lazy"\n        decoding="async"\n      />\n    </span>'}}),"\n",s.createElement(n.p,null,"디버거를 이용하여 실행 순서를 살펴보니 Request가 들어오면 _authenticate 함수가 실행됩니다.\r\n여기서 우리가 기본으로 설정한 Authentication 클래스가 호출되는 것이죠."),"\n",s.createElement(n.pre,null,s.createElement(n.code,{className:"language-python"},'# rest_framework/request.py\r\ndef _authenticate(self):\r\n    """\r\n    Attempt to authenticate the request using each authentication instance\r\n    in turn.\r\n    """\r\n    for authenticator in self.authenticators:\r\n        try:\r\n            user_auth_tuple = authenticator.authenticate(self)\r\n        except exceptions.APIException:\r\n            self._not_authenticated()\r\n            raise\r\n\r\n        if user_auth_tuple is not None:\r\n            self._authenticator = authenticator\r\n            self.user, self.auth = user_auth_tuple\r\n            return\n')),"\n",s.createElement(n.p,null,"앞서 ",s.createElement(n.code,null,"JWTAuthentication")," 클래스를 기본으로 설정하였으니 토큰을 이용해 인증을 합니다.\r\n그리고 인증을 통해 어떠한 유저의 요청인지 파악하고 이를 Request에 넣어줍니다."),"\n",s.createElement(n.h1,{id:"authorization"},"Authorization"),"\n",s.createElement(n.p,null,"이제 사용자에 대한 인증을 하였으니 각 권한별로 접근할 수 있는 API에 대해 설정을 하려고 합니다.\r\n로그인을 하지 않은 사용자에 대해서 로그인, 회원가입 기능만을 접근하도록 하고 나머지를 차단해야겠죠.\r\n유저에 대한 정보를 보는 것은 Staff 또는 본인 스스로만 가능해야 합니다.\r\n모든 유저를 볼 수 있는 API는 Staff 이상만이 접근할 수 있어야 하죠."),"\n",s.createElement(n.p,null,"기본적으로 ",s.createElement(n.code,null,"AllowAny"),", ",s.createElement(n.code,null,"IsAuthenticated"),", ",s.createElement(n.code,null,"IsAdminUser")," 와 같은 기본적으로 제공하는 권한이 있습니다.\r\n하지만 우리는 User 에 관한 정보를 조회할 때 자기 자신만 허용하려고 하죠.\r\n그래서 추가적인 권한을 만들어야 합니다."),"\n",s.createElement(n.pre,null,s.createElement(n.code,{className:"language-python"},"# toss/core/permissions.py\r\nfrom rest_framework import permissions\r\n\r\nclass IsOwnerOrStaff(permissions.IsAuthenticated):\r\n    def has_object_permission(self, request, view, obj):\r\n        return bool(\r\n            request.user.is_staff or\r\n            request.user.is_superuser or\r\n            request.user == obj\r\n        )\n")),"\n",s.createElement(n.p,null,"모든 권한은 ",s.createElement(n.code,null,"BasePermission")," 클래스를 상속합니다.\r\n해당 클래스는 ",s.createElement(n.code,null,"has_permission"),"과 ",s.createElement(n.code,null,"has_object_permission"),"이 있죠.\r\n먼저 ",s.createElement(n.code,null,"has_permission"),"을 통해 권한을 확인하고 ",s.createElement(n.code,null,"has_object_permission"),"이 구현되어 있다면 이를 또 실행하죠.\r\n따라서 기본적으로 인증된 사용자에 대해서 Staff 혹은 자기 자신인지 확인하도록 구현하였습니다."),"\n",s.createElement(n.pre,null,s.createElement(n.code,{className:"language-python"},"# toss/core/views.py\r\nfrom rest_framework import generics, permissions\r\nfrom rest_framework_simplejwt.serializers import TokenObtainPairSerializer, TokenRefreshSerializer\r\nfrom rest_framework_simplejwt.views import TokenObtainPairView, TokenRefreshView   \r\n\r\nfrom .serializers import UserSerializer\r\nfrom .models import User\r\nfrom .permissions import IsOwnerOrStaff\r\n\r\n# ====================================== ANYONE ======================================\r\n\r\nclass UserSignupView(generics.CreateAPIView):\r\n    permission_classes = [permissions.AllowAny]\r\n    serializer_class = UserSerializer\r\n\r\nclass UserLoginView(TokenObtainPairView):\r\n    permission_classes = [permissions.AllowAny]\r\n    serializer_class = TokenObtainPairSerializer\r\n    \r\nclass UserRefreshView(TokenRefreshView):\r\n    permission_classes = [permissions.AllowAny]\r\n    serializer_class = TokenRefreshSerializer\r\n\r\n# ====================================== AUTH ======================================\r\n    \r\nclass UserDetailView(generics.RetrieveUpdateDestroyAPIView):\r\n    permission_classes = [IsOwnerOrStaff]\r\n    queryset = User.objects.all()\r\n    serializer_class = UserSerializer\r\n\r\n# ====================================== ADMIN ======================================\r\n\r\nclass UserListView(generics.ListAPIView):\r\n    permission_classes = [permissions.IsAdminUser]\r\n    queryset = User.objects.all()\r\n    serializer_class = UserSerializer\n")),"\n",s.createElement(n.p,null,"클래스 기반 View 들은 permission_classes 를 지정해서 권한을 설정할 수 있습니다.\r\n각 View 에 해당하는 URL도 설정해줍니다."),"\n",s.createElement(n.pre,null,s.createElement(n.code,{className:"language-python"},'# toss/core/urls.py\r\nurlpatterns = [\r\n    path("signup/", UserSignupView.as_view()),\r\n    path("login/", UserLoginView.as_view()),\r\n    path("refresh/", UserRefreshView.as_view()),\r\n    path("detail/<int:pk>", UserDetailView.as_view()),\r\n    path("list/", UserListView.as_view())\r\n]\n')),"\n",s.createElement(n.p,null,"이제 이를 테스트해보죠."),"\n",s.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<figure class="gatsby-resp-image-figure" style="">\n    <span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 704px; "\n    >\n      <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 64.20454545454545%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAB2UlEQVR42pVTW27bMBDU1XqWnip3KNBz9Kc/vUDbtI5jixbfFClSk1nSbowACVACg11R5OxjlpOJCcuyQCkFTWuMwb7vkCVG/BvG3rD3qzbgYhNCyphy0mi1oLWGGAKc84SD94F7lQQNeyMh/8sZIWxXfxMmNHz9kfDpweDzF48pxYCcMwLJIrMVshgjnHfIJSOl1FFK6efEr7UO4p7tDhUavv0q+P7IDOXAuq5IhBCUvPI7wTuD6C3WKIEIlmPj9i/LtyukipQrSy4bFuOgnmeclMHjyWDWHmUbWexXgpER3l2VPytbMOVtg3EBl/MFarE4LQErg+wfXH5vbeSa9g9u7v/JKiKyhxEr+ya9jOzdKo2nKNKrG+k9+jTwTswUq/Ae79pQoFzhN0s+Hg59Dj1VNdbABw+j9VDaWWQKUhnkbeavGIEd22atY4aiLi/kwKhRor3CeI5RoOLcF5Fk7gT1Drc96buM3STqiAJWOxzOlipb/Dwa/D6a7v8RcF+Z2AWbacU/a1obMQvo+5h70KnPFSEpPyuSzgN/SfJ09Y/KY3EJ2q8kS51QvhWfmzw5w2p8Kux/wSQvoL+SNUNb9oFlDkSWzcO099DMaOE544bVLo6WsGQfAl4Ajrz0S1cALEoAAAAASUVORK5CYII=\'); background-size: cover; display: block;"\n  ></span>\n  <img\n        class="gatsby-resp-image-image"\n        alt="로그인"\n        title=""\n        src="/static/7ca65df300730d73d6f725a71fb5607c/5ebd7/django_login.png"\n        srcset="/static/7ca65df300730d73d6f725a71fb5607c/06437/django_login.png 176w,\n/static/7ca65df300730d73d6f725a71fb5607c/ba1c3/django_login.png 352w,\n/static/7ca65df300730d73d6f725a71fb5607c/5ebd7/django_login.png 704w,\n/static/7ca65df300730d73d6f725a71fb5607c/f0551/django_login.png 862w"\n        sizes="(max-width: 704px) 100vw, 704px"\n        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n        loading="lazy"\n        decoding="async"\n      />\n    </span>\n    <figcaption class="gatsby-resp-image-figcaption">로그인</figcaption>\n  </figure>'}}),"\n",s.createElement(n.p,null,"로그인을 하면 각 토큰을 반환합니다."),"\n",s.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<figure class="gatsby-resp-image-figure" style="">\n    <span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 704px; "\n    >\n      <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 59.65909090909091%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAA7DAAAOwwHHb6hkAAABu0lEQVR42p1Ty47bMAz03/WH+jntP/TQL9hrb70WRbdGgnWyjmQ9LFGSrelIQbbZXgKUwJimJY6HFDV4Cah1h407JhUIj7MOeJk9tCvwCVyrcII3tLhhCRWpVHz+JvjwyeDjV4/BOosQArTxMMyelcHiAhFh10TS0L2LGZ6wq0AKOhgib8CP1x1fvkc8/RQM4+8Rx+MR1hhEEsvqkCUi54SUBEmk+xBWrOva97S1G1JK2Hcy18xKNwzPz78wjiNe5xlaacQYIZIIeUNLMsuC6XSCJ2mL7yFEjIJcCobD4YBpeoH3HoUfmtVa36FZIJGzjio9vYXlu6VveYY+5YxAMUNT1DbdlDRkLv6ropXbei0S36m/oTDHsG2DulywmAVaa6hF8XAWqIuC864TNKK/uMZKK+7V1zyrMc0Wh5NhDhWeT1NnbsnWuZ5gzPXkHWOh39j8e7u14f7d+7WXP7S6QwwoLKuUjG3bUIju2dPm677jkTXi1qohbzsVFLjTGYqzWPH/tvPHQ+Fjo5LAsbloB2U50BzwxInNZYfQ35f4kDCRrEkNSiHwYGbtSSj9RrggMLwxuWx98yO0kv8A3SykKYm+tL0AAAAASUVORK5CYII=\'); background-size: cover; display: block;"\n  ></span>\n  <img\n        class="gatsby-resp-image-image"\n        alt="JWT 토큰"\n        title=""\n        src="/static/1c0279f5a853470b42796a8593ae33a9/5ebd7/django_user_detail_authentication.png"\n        srcset="/static/1c0279f5a853470b42796a8593ae33a9/06437/django_user_detail_authentication.png 176w,\n/static/1c0279f5a853470b42796a8593ae33a9/ba1c3/django_user_detail_authentication.png 352w,\n/static/1c0279f5a853470b42796a8593ae33a9/5ebd7/django_user_detail_authentication.png 704w,\n/static/1c0279f5a853470b42796a8593ae33a9/39a20/django_user_detail_authentication.png 859w"\n        sizes="(max-width: 704px) 100vw, 704px"\n        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n        loading="lazy"\n        decoding="async"\n      />\n    </span>\n    <figcaption class="gatsby-resp-image-figcaption">JWT 토큰</figcaption>\n  </figure>'}}),"\n",s.createElement(n.p,null,"해당 토큰을 헤더에 settings.py 에서 설정한 AUTH_HEADER_TYPES 와 함께 넣어주고 API를 호출하면 결가가 제대로 나오는 것을 볼 수 있습니다."),"\n",s.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<figure class="gatsby-resp-image-figure" style="">\n    <span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 704px; "\n    >\n      <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABg0lEQVR42nVSSY7UQBCsD/KYeREf4DRz5RMcOHBrNI2FG9vl2lc7yEy3Ww2ClEK1ZmRkVKmQI/q2YSOE4GGthXMezjrUWgHscsbY911wrlvf6HzD69eEDx8tXt48lHUWMUZ4Isk5w5pViHkv5yJjov1SihRIKWF7EO9S8PvS8elLwudvGer6fgXDGHMkE1lJEYWSmYSLMEII8D7QnSDEtTCK3OmdOtkZHepyuYAxTROWZREF+Yko39VxwXEcidQLYbmTSVFCTBm1NahhGDAMP8S3Whs4Tq9OcLB6a6zY4cgmSx6z31zA0Mi5KxVVrMAH/1ByevWsgMEtx0C+lvyH+gPka++4jTeoZZ6FedUay7rQfMU8L6TCiSomeoZeNWa6N+kZ2hpoozFOFtfRwLgI9Wv8Kf6wd84fr8st8Vr84uq14IzTgr8jSB59GzYz0qu2e8uZ2s30gilXRG7nPq9tI3T5Mv8LzleNemfPWEXnOSUVQq4HmCiVRt+oyfr4e/+O1hp+A2kjB80PoTh1AAAAAElFTkSuQmCC\'); background-size: cover; display: block;"\n  ></span>\n  <img\n        class="gatsby-resp-image-image"\n        alt="권한 오류"\n        title=""\n        src="/static/b5dbfd6a2c648c71847610a7596b5fda/5ebd7/django_user_detail_fail.png"\n        srcset="/static/b5dbfd6a2c648c71847610a7596b5fda/06437/django_user_detail_fail.png 176w,\n/static/b5dbfd6a2c648c71847610a7596b5fda/ba1c3/django_user_detail_fail.png 352w,\n/static/b5dbfd6a2c648c71847610a7596b5fda/5ebd7/django_user_detail_fail.png 704w,\n/static/b5dbfd6a2c648c71847610a7596b5fda/c3fd4/django_user_detail_fail.png 854w"\n        sizes="(max-width: 704px) 100vw, 704px"\n        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n        loading="lazy"\n        decoding="async"\n      />\n    </span>\n    <figcaption class="gatsby-resp-image-figcaption">권한 오류</figcaption>\n  </figure>'}}),"\n",s.createElement(n.p,null,"그러나 다른 유저의 정보를 보려고 할 때 오류가 나는 것을 볼 수 있죠."),"\n",s.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<figure class="gatsby-resp-image-figure" style="">\n    <span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 704px; "\n    >\n      <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 56.25%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABeklEQVR42pWSS07EMAyGczfOxGXYcQhuwYo90kxhNCNKH0navJMfO30wsECDKytJE/+OP0dMdkbMCTklzPMEpRS01nUMPoAt54xcCsrqdU0eU+ZdPD4b3D1I3D/NENM0wTlHYnMdtZQwZoa1dv+/zb33tGd3QfZSMgaT8XLyeG0jxOl0QtM0GMdxCZ40nDVwFMwi18Kc3BhThTfncyl4lOgpQYI4Ho84HA7oux59P8CwwCp27UpJtG1LwgYhhCoWwiYc6pkYE9/wHW9vDeQo62ahMhLx/FlWIUGNfuh3vkqqmoTXS2yoc8HBLMSBfxmfiTHWZNu4Oa/ZOJGYtKLr+srKVHYLr3rLrbPrLYFSA60jLMQsxFBHbRI6RQ1zAeJyPhO7noDPkPxkqClbgySVZekpRUpybdvz4S+XpTJJSFhDBALJcBOBTtSlsgd9B95qXLoIzIEm8nLBRyeR/iHw2zi5SGtXTTdADRqf0qBXlrgQV0//XawsbxX8Ao/RWjGBELylAAAAAElFTkSuQmCC\'); background-size: cover; display: block;"\n  ></span>\n  <img\n        class="gatsby-resp-image-image"\n        alt="권한 승인"\n        title=""\n        src="/static/1f9a783cb4d1a862229d3d39b27165f9/5ebd7/django_user_detail_success.png"\n        srcset="/static/1f9a783cb4d1a862229d3d39b27165f9/06437/django_user_detail_success.png 176w,\n/static/1f9a783cb4d1a862229d3d39b27165f9/ba1c3/django_user_detail_success.png 352w,\n/static/1f9a783cb4d1a862229d3d39b27165f9/5ebd7/django_user_detail_success.png 704w,\n/static/1f9a783cb4d1a862229d3d39b27165f9/914ae/django_user_detail_success.png 860w"\n        sizes="(max-width: 704px) 100vw, 704px"\n        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n        loading="lazy"\n        decoding="async"\n      />\n    </span>\n    <figcaption class="gatsby-resp-image-figcaption">권한 승인</figcaption>\n  </figure>'}}),"\n",s.createElement(n.p,null,"다시 Staff 계정으로 로그인한 후, 이 토큰을 이용해 다른 유저의 정보에 접근해보면 모두 볼 수 있는 것을 확인할 수 있습니다."))}var l=function(e){void 0===e&&(e={});const{wrapper:n}=Object.assign({},(0,t.ah)(),e.components);return n?s.createElement(n,e,s.createElement(i,e)):i(e)};function c(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}var o=a(4316),g=a(1840),d=a(7821),A=a(2654),p=a(4111),m=a(2726),u=a(4480),b=a(2818),f=a(9213),E=a(7213),w=a(9265),y=a(9601),_=a(3071),h=a(6097),j=a(6782),k=a(4891),S=a(3387),T=a(917);const I=e=>{let{data:{mdx:n},children:a}=e;const r=(0,u.sJ)((0,b.cp)(b.eE,!1)),i=(0,u.sJ)((0,b.cp)(b.rf,!1)),l=(0,u.Zl)((0,b.cp)(b.Cy,n.tableOfContents.items));return(0,s.useEffect)((()=>{l(n.tableOfContents.items)}),[n]),(0,T.tZ)(g.Z,null,(0,T.tZ)(v,null,(0,T.tZ)(p.Z,null)),(0,T.tZ)(U,null,(0,T.tZ)(B,{className:"navigation",isNavOpened:i},(0,T.tZ)(R,{className:"hide_scroll"},(0,T.tZ)(d.Z,null))),(0,T.tZ)(D,{isNavOpened:i},(0,T.tZ)(x,{isWide:r},(0,T.tZ)(m.Z,{title:n.frontmatter.title,date:n.frontmatter.date}),(0,T.tZ)(t.Zo,{components:{p:E.Z,h1:w.H1,h2:w.H2,h3:w.H3,h4:w.H4,h5:w.H5,h6:w.H6,hr:y.Z,blockquote:_.Z,ul:j.Z,ol:h.Z,pre:k.Z,code:S.Z}},a))),(0,T.tZ)(z,null,(0,T.tZ)(C,null,(0,T.tZ)(A.Z,null)))))},v=(0,o.Z)("div",{target:"e1ojob7j7"})({name:"11t2x7x",styles:"display:flex;height:var(--header-height);z-index:5;padding:0.6rem 2rem 0.6rem 0.6rem;position:fixed;width:100%;background:var(--background-color);border-bottom:1px solid var(--border-color)"}),U=(0,o.Z)("div",{target:"e1ojob7j6"})({name:"majwgz",styles:"position:relative;display:flex;min-height:calc(100vh - var(--header-height));overflow-x:hidden"}),B=(0,o.Z)("aside",{target:"e1ojob7j5"})("margin-left:",(e=>e.isNavOpened?"0":"calc(-1 * var(--sidebar-width))"),";flex:0 0 var(--sidebar-width);font-size:0.875rem;overflow-x:hidden;overflow-y:auto;transition:margin 0.25s var(--ease-in-out-quad);@media (min-width: ",f.Z.IPAD_PRO,"px){margin-left:0;}"),R=(0,o.Z)("nav",{target:"e1ojob7j4"})({name:"l4vzaw",styles:"overflow-y:auto;height:100%;padding:var(--body-padding-top) 0 3rem 0;position:fixed;width:var(--sidebar-width);&:-webkit-scrollbar{display:none;}"}),x=(0,o.Z)("main",{target:"e1ojob7j3"})("padding:1rem;width:100%;@media (min-width: ",f.Z.IPAD_AIR,"px){width:",(e=>e.isWide?"90%":"65%"),";}"),D=(0,o.Z)("main",{target:"e1ojob7j2"})("width:calc(100% - 2 * var(--sidebar-width));padding-top:var(--body-padding-top);flex-grow:1;min-width:20rem;display:flex;justify-content:center;opacity:",(e=>e.isNavOpened?.3:1),";@media (min-width: ",f.Z.IPAD_PRO,"px){opacity:1;}"),z=(0,o.Z)("aside",{target:"e1ojob7j1"})("font-size:0.75rem;font-weight:bold;overflow-x:hidden;overflow-y:auto;padding-top:var(--body-padding-top);width:0;transition:width 0.25s var(--ease-in-out-quad);@media (min-width: ",f.Z.HD,"px){width:var(--sidebar-width);}"),C=(0,o.Z)(R,{target:"e1ojob7j0"})({name:"b40oxt",styles:"padding:0 1rem 0 1rem"});function M(e){return s.createElement(I,e,s.createElement(l,e))}}}]);
//# sourceMappingURL=component---src-components-templates-main-template-tsx-content-file-path-contents-tool-drf-drf-mdx-f9f63fedf52fd0dadcd6.js.map