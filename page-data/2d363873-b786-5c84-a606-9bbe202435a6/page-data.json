{"componentChunkName":"component---src-components-templates-main-template-tsx-content-file-path-contents-cv-epipolar-geometry-mdx","path":"/2d363873-b786-5c84-a606-9bbe202435a6","result":{"data":{"mdx":{"id":"2d363873-b786-5c84-a606-9bbe202435a6","body":"\r\nimport Comment from '@contents/components/Comment';\r\n\r\n우리는 앞서 camera calibration을 통해 3차원 물체를 2차원으로 변환하는 방법을 배웠어요.\r\n그렇다면 반대로 2차원 이미지를 이용하여 3차원 물체로 변환하는 과정은 어떨까요?\r\n모두가 알고 있듯, 하나의 이미지만으로는 2차원에서 3차원으로 복구하는 과정을 불가능해요.\r\n차원이 줄어들어 모든 정보를 담을 수 없기 때문이죠.\r\n\r\n그래서 우리는 다른 방법으로 여러 방향에서 촬영한 이미지들을 활용할 수 있겠어요.\r\n이때 필요한 동일한 물체에 대한 서로 다른 지점에서의 이미지 쌍에 대한 기하학적 관계를 다루는 것이 `Epipolar Geometry`입니다.\r\n\r\n\r\n## 용어 정리\r\n\r\n![](assets/epipolar_geometry/00.png)\r\n\r\n먼저 기본적인 용어를 먼저 정리하고 가도록 하죠.\r\n두 카메라의 원점을 연결한 선을 `Baseline`이라고 합니다.\r\n그리고 이 baseline을 지나는 모든 평면을 `epipolar plane`라고 하죠.\r\n이때 동일한 포인트 $X$를 각 이미지에 투영한 포인트를 각각 $x$, $x'$이라고 한다면, $X$, $x$, $x'$ 모두 동일한 epipolar plane위에 존재합니다.\r\n\r\n![](assets/epipolar_geometry/01.png)\r\n\r\n`Epipolar line` $l$, $l'$은 epipolar plane과 이미지가 만나는 라인을 의미해요.\r\n$X$의 위치에 따라 계속해서 달라지죠.\r\n\r\n![](assets/epipolar_geometry/02.png)\r\n\r\n`Epipole` $e$, $e'$은 baseline과 이미지가 만나는 지점이에요.\r\n이는 상대 카메라의 중심이 내 이미지에 어디에 위치하는지를 나타내는 것이죠.\r\n\r\n![](assets/epipolar_geometry/03.png)\r\n![](assets/epipolar_geometry/04.png)\r\n\r\n위 그림과 같이 같은 도자기를 찍은 두 사진이 있다고 하였을 때,\r\nepipole은 꼭 이미지 속에 있는 것이 아니에요.\r\n\r\n![](assets/epipolar_geometry/05.png)\r\n\r\n위 사진도 마찬가지로, 스테레오와 같은 평행하게 한 물체를 찍었다면 epipole은 무한대가 되겟죠.\r\n\r\n![](assets/epipolar_geometry/06.png)\r\n\r\n상대 카메라의 위치가 이미지 내에 있다면 이런 식으로 epipolar line이 이미지 내 카메라 위치로 모이는 것을 볼 수 있어요.\r\n\r\n# Epipolar constraint\r\n\r\n![](assets/epipolar_geometry/07.png)\r\n\r\n동일한 $X$를 촬영한 두 이미지를 봅시다.\r\n좌측 이미지에서 $x$라는 위치에 투영되었다고 할게요.\r\n그렇다면 우측 이미지에서 $X$에 해당하는 $x'$은 epipolar line $l'$위 어딘가에 있을거에요.\r\n그럼 우리는 한쪽 이미지에서 어떠한 feature를 다른 이미지에서 찾기 위해서 epipolar line위 점들만 조사하면 되는 거네요!\r\n\r\n![](assets/epipolar_geometry/08.png)\r\n\r\n위 그림과 같이 좌측 카메라가 평면 $\\pi$를 이미지로 투영한 상태라고 합시다.\r\n이 때 $X$를 투영한 점을 $x$, epipole을 $e$라고 할게요.\r\n\r\n$$\r\nl' = e' \\times x' \\tag{1}\r\n$$\r\n<Comment>\r\n3차원에서 두 점 p1과 p2를 지나는 직선의 방정식의 normal vector $l$은 $l = x_1 \\times x_2$다.\r\n</Comment>\r\n우리는 epipolar line $l'$를 식 (1)과 같이 정의할 수 있어요.\r\n이때 $x$를 $x'$로 변환하는 행렬 $H_{\\pi}$라고 하면\r\n\r\n$$\r\nx' = H_{\\pi}x \\qquad l' = e' \\times H_{\\pi} x = F x \\tag{2}\r\n$$\r\n\r\n여기서 $l'$은 $x'$, $e'$을 지나는 직선의 방정식의 normal vector이고 $x'$와 수직관계를 가지기 때문에 ${x'}^T l' = 0$가 되죠.\r\n$e' \\ times H_{\\pi}$를 `fundamental matrix` $F$라고 합시다.\r\n이를 식 (2)와 합쳐보면\r\n\r\n$$\r\n{x'}^T F x = 0 \\tag{3}\r\n$$\r\n\r\n즉 $x$와 $x'$ 쌍을 이용하여 식 (3)을 만족시키는 $F$를 찾아야 해요.\r\n$F$는 homogeneous matrix이기 때문에 동일한 상수 배수로 scaling이 됩니다.\r\n이로 인해 전체적인 scale 값은 중요하지 않으므로 하나의 파라미터 자유도를 가지게 돼요.\r\n\r\n$F$는 rank가 2입니다.\r\n즉, 행렬의 두개의 행이 선형적으로 독립적이죠.\r\n나머지 하나의 행은 다른 행의 선형 조합으로 표현될 수 있습니다.\r\n이로 인해 추가로 하나의 파라미터 자유도를 가지게 돼요.\r\n<Comment>\r\nrank 2가 뭐지 이해가 안되어서 GPT 답변 가져왔음.\r\n이 관계는  F가 에피폴라 선을 올바르게 나타내려면 계수가 2여야 함을 의미합니다.\r\n왜냐하면, 계수가 3이면, 이는 F가 풀 랭크(full rank)를 가지고 있으며, 그 결과로 모든 점들이 대응 관계를 만족하지 않게 될 것이기 때문입니다.\r\n반면, 계수가 1이거나 0이라면, 이는 F가 충분한 정보를 포함하지 않아 에피폴라 선을 올바르게 나타내지 못할 것임을 의미합니다.\r\n</Comment>\r\n\r\n$F$는 원래 $3 \\times 3$크기의 행렬이기 떄문에 9개의 파라미터를 조사해야 하지만, 위와 같은 조건으로 7개의 파라미터만 알면 됩니다.\r\n\r\n![](assets/epipolar_geometry/09.png)\r\n\r\n${x'}^T l' = 0$이기 때문에 ${l'}^T x' = 0$의 관계를 가집니다. 이는 \r\n\r\n${x'}^T F x = 0$ 이기 때문에 $x^T F^T x' = 0$의 관계를 가집니다. ","tableOfContents":{"items":[{"items":[{"url":"#용어-정리","title":"용어 정리"}]},{"url":"#epipolar-constraint","title":"Epipolar constraint"}]},"frontmatter":{"description":"Epipola Geometry","title":"Epipola Geometry"}},"file":{"modifiedTime":"2023-12-11T16:10:21.425Z"}},"pageContext":{"id":"2d363873-b786-5c84-a606-9bbe202435a6","relativePath":"cv/epipolar_geometry.mdx","frontmatter":{"title":"Epipola Geometry","description":"Epipola Geometry","order":6}}},"staticQueryHashes":["2317542362","3731189812"],"slicesMap":{}}